# 🌸 Sakura Notes

<div align="center">

[![GitHub Pages](https://img.shields.io/badge/GitHub-Pages-222?logo=github)](https://soft-zihan.github.io/SakuraBlog/)
[![Vue 3](https://img.shields.io/badge/Vue-3.5-4FC08D?logo=vue.js)](https://vuejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.4-3178C6?logo=typescript)](https://www.typescriptlang.org/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-CSS-38B2AC?logo=tailwind-css)](https://tailwindcss.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![zread](https://img.shields.io/badge/Ask_Zread-_.svg?style=flat&color=00b0aa&labelColor=000000&logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQuOTYxNTYgMS42MDAxSDIuMjQxNTZDMS44ODgxIDEuNjAwMSAxLjYwMTU2IDEuODg2NjQgMS42MDE1NiAyLjI0MDFWNC45NjAxQzEuNjAxNTYgNS4zMTM1NiAxLjg4ODEgNS42MDAxIDIuMjQxNTYgNS42MDAxSDQuOTYxNTZDNS4zMTUwMiA1LjYwMDEgNS42MDE1NiA1LjMxMzU2IDUuNjAxNTYgNC45NjAxVjIuMjQwMUM1LjYwMTU2IDEuODg2NjQgNS4zMTUwMiAxLjYwMDEgNC45NjE1NiAxLjYwMDFaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00Ljk2MTU2IDEwLjM5OTlIMi4yNDE1NkMxLjg4ODEgMTAuMzk5OSAxLjYwMTU2IDEwLjY4NjQgMS42MDE1NiAxMS4wMzk5VjEzLjc1OTlDMS42MDE1NiAxNC4xMTM0IDEuODg4MSAxNC4zOTk5IDIuMjQxNTYgMTQuMzk5OUg0Ljk2MTU2QzUuMzE1MDIgMTQuMzk5OSA1LjYwMTU2IDE0LjExMzQgNS42MDE1NiAxMy43NTk5VjExLjAzOTlDNS42MDE1NiAxMC42ODY0IDUuMzE1MDIgMTAuMzk5OSA0Ljk2MTU2IDEwLjM5OTlaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik0xMy43NTg0IDEuNjAwMUgxMS4wMzg0QzEwLjY4NSAxLjYwMDEgMTAuMzk4NCAxLjg4NjY0IDEwLjM5ODQgMi4yNDAxVjQuOTYwMUMxMC4zOTg0IDUuMzEzNTYgMTAuNjg1IDUuNjAwMSAxMS4wMzg0IDUuNjAwMUgxMy43NTg0QzE0LjExMTkgNS42MDAxIDE0LjM5ODQgNS4zMTM1NiAxNC4zOTg0IDQuOTYwMVYyLjI0MDFDMTQuMzk4NCAxLjg4NjY0IDE0LjExMTkgMS42MDAxIDEzLjc1ODQgMS42MDAxWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNNCAxMkwxMiA0TDQgMTJaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00IDEyTDEyIDQiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K&logoColor=ffffff)](https://zread.ai/soft-zihan/soft-zihan.github.io)
[![DeepWiki](https://img.shields.io/badge/DeepWiki-_.svg?style=flat&color=00b0aa&labelColor=000000&logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTY)](https://deepwiki.com/soft-zihan/SakuraBlog)

**为 GitHub Pages 设计的纯静态 Vue 知识库/博客（不依赖静态站点框架，也无需自建后端）**

<p>
  <b>它的差异化卖点</b><br/>
  • 构建期生成：笔记索引、渲染产物、raw 源码等静态资产<br/>
  • 网页端发布：直连 GitHub API；无写权限自动 Fork + PR<br/>
  • 主题系统：运行时换肤（CSS 变量 + Tailwind），暗色支持系统/时间策略<br/>
  • 学习实验室：8 阶段路线 + 可做“逐行笔记”的源码查看器
</p>

[🌐 在线演示](https://soft-zihan.github.io/SakuraBlog/) · [🐛 报告问题](https://github.com/soft-zihan/SakuraBlog/issues)

</div>

---

## 📑 目录

- [✨ 特性概览](#-特性概览)
- [🧠 为什么不需要后端也能工作](#-为什么不需要后端也能工作)
- [🙏 致谢](#-致谢)
- [🎯 快速开始](#-快速开始)
- [🧪 测试](#-测试)
- [📁 项目结构](#-项目结构)
- [🏗️ 技术架构](#️-技术架构)
- [🔧 配置指南](#-配置指南)
- [📝 内容管理](#-内容管理)
- [🔐 安全与数据](#-安全与数据)
- [🤝 贡献指南](#-贡献指南)
- [📜 更新日志](#-更新日志)
- [🔬 技术实现解析](#-技术实现解析)
- [🧩 静态部署的取舍](#-静态部署的取舍)
- [🚀 改造成前后端项目（去除 Fork+PR 依赖）](#-改造成前后端项目去除-forkpr-依赖)

---

## ✨ 特性概览

### 🧩 天生为“纯静态托管”设计（无后端也能跑起来）

| 特性 | 描述 |
| -- | -- |
| **构建期数据管线** | 在部署前生成 `public/data/files.json`、预渲染 HTML、raw 源码副本、音乐/壁纸清单等静态资产。 |
| **运行时只读静态资源** | 上线后所有内容通过静态托管 `fetch()` 读取（GitHub Pages 友好）。 |
| **本地优先的状态** | 偏好设置、阅读行为、学习进度等全部保存在浏览器（`localStorage` + Pinia）。 |
| **可选外部能力** | 评论（Giscus）、阅读统计（Umami Share Token API）、云端备份（GitHub）都无需自建后端。 |

### ✍️ 不跑服务器也能发布（GitHub Native）

| 特性 | 描述 |
| -- | -- |
| **发布工作台** | 导入/预览文件、重命名、选择目录、注入标签/作者元数据，并从网页端发布。 |
| **实时预览** | 编辑时实时 Markdown 预览。 |
| **图片自动上传** | Markdown 里的本地图片可自动上传到 GitHub。 |
| **智能 Fork + PR** | 无写权限用户自动 Fork 并创建 PR，上游仓库保持干净可控。 |

### 🎨 主题系统是“第一特性”（不只是深色模式）

| 特性 | 描述 |
| -- | -- |
| **运行时换肤** | 主题色写入 CSS 变量，并由 Tailwind 直接消费，实现整站级“换皮”。 |
| **暗色策略** | 手动切换 / 跟随系统 / 按时间自动切换。 |
| **氛围能力** | 壁纸层 + 音乐播放器，让阅读体验更像“个人空间”。 |
| **樱花交互层** | 花瓣拖拽、长按旋涡等交互，且默认不遮挡页面点击。 |

### 📱 移动端适配（不是一句“响应式”糊弄）

| 特性 | 描述 |
| -- | -- |
| **触摸原生交互** | 基于 pointer 事件统一鼠标/触摸；拖拽等交互在需要时关闭默认触摸行为。 |
| **特效不挡阅读** | 背景特效默认不拦截点击，只有花瓣层开放指针事件。 |
| **链接与资源兼容** | 对内部链接/图片/PDF 内嵌做了 GitHub Pages 友好的 base URL 解析策略。 |
| **面板与阅读易用** | 搜索与面板采用视口高度限制与响应式布局，小屏也能舒适操作。 |

### 🧪 学习实验室 + 源码查看器（把 UI 映射回真实实现）

| 特性 | 描述 |
| -- | -- |
| **8 阶段学习路径** | 从 Web 基础到 Vue 3 进阶与综合挑战的路线图。 |
| **学习进度持久化** | 完成情况与推荐下一步学习内容保存在本地。 |
| **源码查看器** | 读取本站真实源码，叠加“预置笔记 + 用户逐行笔记”。 |
| **读码工具链** | 函数/类/Vue SFC 块等折叠解析；支持导入导出与提交笔记到 GitHub 共建。 |

#### 学习实验室：推荐读法

- **Stage（阶段）**：强调“边看边玩边验证”（交互组件 + 即时反馈）。 
- **笔记（notes/VUE学习笔记）**：配套的系统材料，更适合从头到尾建立概念主线。 
- **源码查看器（Source Viewer）**：把站内 UI 对应到真实项目源码，顺着预置笔记读懂“为什么这么写”。 

### 📚 核心阅读体验

| 特性 | 描述 |
| -- | -- |
| **Markdown + 目录 + 高亮** | Markdown 渲染、自动目录（ToC）与代码语法高亮。 |
| **全文搜索** | MiniSearch 检索，支持中英混合分词、增量补全与索引缓存。 |
| **阅读工具** | 收藏、点赞、标签过滤、阅读历史。 |
| **PDF 友好** | PDF 链接可内嵌阅读，并支持打开/下载。 |

### 🔐 安全与数据（客户端侧的 best-effort）

| 特性 | 描述 |
| -- | -- |
| **Token 加密存储** | AES-256-GCM + PBKDF2 派生的设备绑定密钥，Token 不以明文落地。 |
| **备份排除 Token** | Token 明确不参与任何备份流程。 |
| **本地/云端备份** | 支持备份/恢复偏好与进度到本地或 GitHub（可选）。 |

---

## 🧠 为什么不需要后端也能工作

Sakura Notes 通过“把动态需求前置到构建期 + 用户数据本地化 + 写入能力交给 GitHub API”的组合，让它能在 GitHub Pages 这类纯静态托管上跑出接近应用的体验。

```text
notes/（你的 Markdown 知识库）
  │
  ├─ 构建前置脚本（scripts/*）
  │    ├─ 扫描 notes → public/data/files.json
  │    ├─ 复制 notes → public/notes/**
  │    ├─ 预渲染 → public/rendered/**（HTML + 目录）
  │    └─ 导出源码 → public/raw/**（供源码查看器读取）
  │
  └─ vite build → dist/
           │
           ▼
GitHub Pages（静态托管）
           │
           ▼
浏览器运行时
  ├─ fetch() 读取静态资源（notes/index/rendered/raw）
  ├─ localStorage 持久化偏好/进度等状态
  └─ 写入能力（可选）：GitHub API（Token）+ 无权限自动 Fork+PR
```

## 🙏 致谢

- 评论系统与阅读统计实现借鉴了 [RyuChan](https://github.com/kobaridev/RyuChan)。

## 🎯 快速开始

### 方式一：Fork 部署（推荐）

1. **Fork 本仓库**

   - 点击右上角 `Fork` 按钮
2. **启用 GitHub Pages**

   - 进入仓库 `Settings` → `Pages`
   - Source 选择 `GitHub Actions`
3. **添加内容**

   - 在 `notes/zh/` 或 `notes/en/` 目录下创建 `.md` 文件
   - 推送代码，GitHub Actions 自动构建部署
4. **访问你的网站**

   - `https://你的用户名.github.io/仓库名/`

### 方式二：本地开发

```bash
# 克隆仓库
git clone https://github.com/soft-zihan/SakuraBlog.git
cd SakuraBlog

# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build
```

### 方式三：在线发布

直接访问 [Sakura Notes](https://soft-zihan.github.io/SakuraBlog/)，点击右上角设置按钮：

1. 输入你的 GitHub Token（需要 `repo` 权限）
2. 配置目标仓库信息
3. 使用发布工作台撰写并发布文章，发布时会自动fork到你的仓库
4. 会自动为你创建 Pull Request

---

## 🧪 测试

```bash
npm run test -- --run
```

---

## 📁 项目结构

```
sakura-notes/
├── 📁 scripts/              # 构建前置脚本（生成 public/ 下的数据）
│   ├── generate-tree.ts
│   ├── generate-raw.ts
│   ├── generate-music.ts
│   └── generate-wallpapers.ts
├── 📁 src/                  # 源码
│   ├── 📄 main.ts           # Vue 应用挂载入口
│   ├── 📄 App.vue           # 根组件
│   ├── 📄 index.html        # HTML 入口
│   ├── 📄 constants.ts      # i18n 国际化常量
│   ├── 📄 types.ts          # 全局类型定义
│   │
│   ├── 📁 views/            # 页面视图
│   │   └── ArticleReader.vue
│   │
│   ├── 📁 layout/           # 布局
│   │   └── AppLayout.vue
│   │
│   ├── 📁 components/       # Vue 组件
│   │   ├── AppHeader.vue      # 顶部导航栏
│   │   ├── ArticleInfoBar.vue  # 文章信息/操作栏
│   │   ├── ArticleToc.vue      # 文章目录（TOC）
│   │   ├── ThemePanel.vue     # 主题面板
│   │   ├── AppSidebar.vue     # 侧边栏
│   │   ├── SidebarFilterPanel.vue # 侧边栏筛选区
│   │   ├── MainContent.vue    # 主内容区
│   │   ├── 📁 Modals/         # 模态组件
│   │   │   ├── CodeModal.vue
│   │   │   └── Lightbox.vue
│   │   └── 📁 lab/            # 学习实验室系统
│   │       ├── LabDashboard.vue
│   │       ├── SourceCodeViewer.vue
│   │       ├── 📁 stage1-foundation/ ... 📁 stage8-challenge/
│   │       └── 📁 stages/        # Lab Stage 包装页
│   │           └── StageLearningGuide.vue
│   │
│   ├── 📁 composables/      # 组合式函数
│   │   ├── useArticleMeta.ts
│   │   ├── useContentRenderer.ts
│   │   ├── useSearch.ts
│   │   ├── useUmamiViewStats.ts # Umami Share Token 阅读统计
│   │   └── ...
│   │
│   ├── 📁 stores/           # Pinia 状态管理
│   │   ├── appStore.ts
│   │   ├── articleStore.ts
│   │   ├── articleNavStore.ts   # 文章目录/导航状态
│   │   ├── learningStore.ts
│   │   └── musicStore.ts
│   │
│   ├── 📁 locales/          # 多语言
│   │   ├── en.ts
│   │   └── zh.ts
│   │
│   ├── 📁 styles/           # 全局样式
│   │   └── app.css
│   │
│   ├── 📁 utils/            # 工具函数
│   │   ├── fileUtils.ts
│   │   ├── i18nText.ts
│   │   ├── sanitize.ts
│   │   ├── storage.ts
│   │   └── wallhavenApi.ts
│   │
├── 📁 public/              # 静态资源（生成数据）
│   ├── 📁 data/
│   │   ├── files.json
│   │   ├── music.json
│   │   ├── wallpapers.json
│   │   ├── 📁 source-notes-preset/  # 源码查看器的“逐文件”预置笔记
│   │   │   ├── 📁 zh/
│   │   │   └── 📁 en/
│   │   ├── source-notes-preset.zh.json
│   │   └── source-notes-preset.en.json
│   ├── 📁 raw/              # 源码查看器用的 raw 文本（由脚本导出）
│   └── 📁 notes/
│
├── 📄 vite.config.ts      # Vite 构建配置
└── 📄 tsconfig.json       # TypeScript 配置
```

说明：`src/utils/i18nText.ts` 并不是界面文案的 i18n（界面文案在 `src/locales/*`），它只负责把源码查看器的预置笔记锚定到代码行（减少代码变动导致的错位）。

---

## 🏗️ 技术架构

### 整体架构

```
┌─────────────────────────────────────────────────────────┐
│                    客户端 (Browser)                      │
├─────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐     │
│  │  Vue 3 SFC  │  │   Pinia     │  │  Composables│     │
│  │  Components │  │   Stores    │  │   (逻辑)    │     │
│  └─────────────┘  └─────────────┘  └─────────────┘     │
├─────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐     │
│  │ localStorage│  │  GitHub API │  │  Static     │     │
│  │  (持久化)   │  │  (发布/备份)│  │  Assets     │     │
│  └─────────────┘  └─────────────┘  └─────────────┘     │
└─────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────┐
│              GitHub Pages (静态托管)                     │
├─────────────────────────────────────────────────────────┤
│  index.html + JS bundles + notes/*.md + public/*        │
└─────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────┐
│             GitHub Actions (CI/CD)                       │
├─────────────────────────────────────────────────────────┤
│  generate-tree（含 raw 导出）→ generate-raw（兼容保留）→ vite build → deploy │
└─────────────────────────────────────────────────────────┘
```

### 核心技术栈

| 技术                   | 版本 | 用途                           |
| ---------------------- | ---- | ------------------------------ |
| **Vue 3**        | 3.5  | 前端框架，使用 Composition API |
| **TypeScript**   | 5.4  | 类型安全                       |
| **Vite**         | 4.4  | 构建工具                       |
| **Pinia**        | 3.0  | 状态管理                       |
| **Tailwind CSS** | 3.x  | 原子化 CSS                     |
| **Highlight.js** | 11.9 | 代码语法高亮                   |
| **MiniSearch**   | 7.1  | 全文搜索引擎                   |
| **Marked**       | 12.0 | Markdown 解析                  |

### 构建流程

```bash
npm run build
# 等价于:
# 1. tsx scripts/generate-tree.ts  → 扫描 notes/ 生成 public/data/files.json，并生成 rendered/raw 等静态产物
# 2. tsx scripts/generate-raw.ts   → 兼容保留（generate-tree 已包含 raw 导出能力）
# 3. tsx scripts/generate-music.ts → 扫描 public/music/ 生成 music.json
# 4. tsx scripts/generate-wallpapers.ts → 生成 wallpapers.json
# 5. vite build                     → 打包 Vue 应用
```

---

## 🔧 配置指南

### GitHub Token 配置

发布功能需要 GitHub Personal Access Token：

1. 访问 [GitHub Settings → Developer settings → Personal access tokens](https://github.com/settings/tokens)
2. 创建 Token，勾选 `repo` 权限（完整仓库访问）
3. 在网站设置中填入 Token

> ⚠️ Token 使用 AES-256-GCM 加密存储，密钥基于浏览器指纹

### Giscus 评论配置

1. 在你的仓库启用 [GitHub Discussions](https://docs.github.com/en/discussions)
2. 安装 [Giscus App](https://github.com/apps/giscus)
3. 访问 [giscus.app](https://giscus.app/) 获取配置参数
4. 修改 `components/GiscusComments.vue` 中的配置

### Umami 阅读统计（云端，可选）

本项目按 **RyuChan** 的思路：让 Umami tracker 负责“记账”，站内通过 **Share Token API** 读数展示“阅读量 / 阅读人数”。由于本站是静态部署 + query 导航，会把每篇文章映射成 `/notes/<文件路径>` 的虚拟路径来做到“按篇统计”。

1. 在 Umami Cloud 创建 Website，然后在“Tracking code”里复制 `websiteId`（也就是脚本里 `data-website-id` 那串）。  
2. 在该 Website 打开 Share，创建 Share Link，复制 `shareId`（Share URL 最后一段）。  
3. 在项目根目录创建 `.env`（或 `.env.local`）并填写：

   ```bash
   VITE_UMAMI_SCRIPT_URL=https://cloud.umami.is/script.js
   VITE_UMAMI_WEBSITE_ID=<你的websiteId>
   VITE_UMAMI_BASE_URL=https://cloud.umami.is
   VITE_UMAMI_SHARE_ID=<你的shareId>
   VITE_UMAMI_TIMEZONE=Asia/Shanghai
   ```

### 自定义壁纸和音乐

    将图片放入`public/image/wallpapers/` 目录， `.mp3` 文件放入 `public/music/` 目录

---

## 📝 内容管理

### 文件夹组织

```
notes/
├── zh/                    # 中文文章
├── en/                    # 英文文章
│   
├── VUE学习笔记/            # 系列教程（中文）
└── 
```

### 使用发布工作台

1. 点击左上角 `写作` 按钮打开发布工作台
2. 支持以下功能：
   - 📝 直接撰写 Markdown
   - 📁 导入本地 `.md` 文件
   - 🖼️ 拖拽/粘贴图片自动上传
   - 🏷️ 添加标签和作者信息
   - 📂 选择发布目录
   - 👁️ 实时预览

---

## 🔐 安全与数据

### Token 安全策略

| 措施                       | 说明                                                          |
| -------------------------- | ------------------------------------------------------------- |
| **AES-256-GCM 加密** | 业界标准对称加密算法                                          |
| **浏览器指纹密钥**   | 密钥基于 userAgent + 屏幕分辨率 + 时区 + 语言派生，设备特异性 |
| **不参与备份**       | Token 明确排除在所有备份操作之外                              |
| **仅用于 API 调用**  | Token 仅发送至 GitHub API，不会发送到其他服务器               |

### localStorage 存储内容

| 数据类型 | 键名前缀                   | 说明                 |
| -------- | -------------------------- | -------------------- |
| 用户偏好 | `app-store`              | 主题、字体、壁纸设置 |
| 文章交互 | `article-store`          | 收藏、点赞           |
| 仓库配置 | `github_*`               | 仓库信息、作者名     |
| 本地备份 | `backup_*`               | 备份数据             |
| Token    | `github_pat_*`           | 加密 Token 材料（不参与备份） |

> ⚠️ **警告**: 清除浏览器数据会丢失这些内容，请定期使用备份功能！

### 发布机制

```
仓库所有者 (有写入权限)        贡献者 (未申请写入权限)
       │                            │
       ▼                            ▼
  直接提交到 main          自动 Fork 仓库
       │                            │
       ▼                            ▼
  触发 GitHub Actions       同步 Fork 到最新
       │                            │
       ▼                            ▼
  自动构建部署              提交到 Fork
                                   │
                                   ▼
                            创建 Pull Request
                                   │
                                   ▼
                            等待仓库所有者审核合并
```

---

## 🤝 贡献指南

### 贡献内容（笔记/文章）

**方式一：网页端发布**

1. 访问 [Sakura Notes](https://soft-zihan.github.io/SakuraBlog/)
2. 配置你的 GitHub Token
3. 使用发布工作台撰写并发布
4. 系统会自动为你创建 PR

**方式二：直接提交 PR**

1. Fork 本仓库
2. 在 `notes/` 目录下创建 `.md` 文件
3. 提交 PR 到 `main` 分支

### 贡献代码

1. **Fork & Clone**

   ```bash
   git clone https://github.com/你的用户名/SakuraBlog.git
   cd SakuraBlog
   npm install
   ```
2. **创建功能分支**

   ```bash
   git checkout -b feature/你的功能名
   ```
3. **开发与测试**

   ```bash
   npm run dev  # 启动开发服务器
   ```
4. **提交代码**

   ```bash
   git add .
   git commit -m "feat: 添加新功能"
   git push origin feature/你的功能名
   ```
5. **创建 Pull Request**

### Commit 规范

| 类型         | 说明                   |
| ------------ | ---------------------- |
| `feat`     | 新功能                 |
| `fix`      | Bug 修复               |
| `docs`     | 文档更新               |
| `style`    | 代码格式（不影响功能） |
| `refactor` | 重构                   |
| `perf`     | 性能优化               |
| `chore`    | 构建/工具变更          |

---

## 📜 更新日志

### v1.1

- 🐛 修复非仓库所有者提交时的 404 错误
- 🔧 优化权限检查逻辑，提前判断是否需要 Fork + PR
- 🔐 新增 Token AES-256-GCM 加密存储
- 🍴 智能 Fork + PR 系统，自动同步上游
- 💾 本地备份系统，支持导入导出
- 👁️ 发布工作台实时预览
- 🧪 学习实验室 8 阶段完整路径
- 🌸 可拖拽樱花花瓣系统
- 🎨 双主题模式（日樱/夜樱）
- 🔍 全文搜索功能
- 💬 Giscus 评论集成
- 🎵 音乐播放器

### v1.0.0

- 🎉 初始版本发布
- 📝 Markdown 笔记系统
- 🌐 中英双语支持
- 📱 响应式设计

---

## 🔬 技术实现解析

这一节把“为什么它能工作”讲清楚：关键链路、数据形态、以及为什么这样设计更适合纯静态部署。

### 1) 笔记树索引：从 `notes/` 到可被前端读取的数据

- **目标**：让前端在运行时能够快速拿到“有哪些文件/目录、每个文件的标题/标签/时间”等结构化信息，而不需要后端。
- **实现方式**：构建前置脚本扫描 `notes/`，生成索引 JSON，并把笔记镜像复制到 `public/notes/`，供浏览器 `fetch()` 读取。
- **关键脚本**：`scripts/generate-tree.ts`
- **产物**：`public/data/files.json`、`public/notes/**`
- **加载策略**：
  - `files.json` 允许浏览器正常缓存（避免每次加载都加时间戳强制绕过）
  - 可选用 localStorage 保存上次成功的 `files.json`，二次访问/硬刷新时先回填 UI，再后台拉最新数据

### 2) 源码查看器：静态站内“读源码”的实现

- **目标**：在网站里查看本项目的 Vue 组件/工具函数源码，并配合“预置笔记”做讲解。
- **实现方式**：
  - 构建前置脚本把需要展示的源码复制/生成到 `public/raw/`（避免线上直接访问 `src/`）。
  - 前端按“虚拟文件系统”读取这些 raw 文本，并用预置的 notes 对关键文件做注释与导航。
- **关键脚本**：`scripts/generate-raw.ts`
- **关键组件**：`src/components/lab/SourceCodeViewer.vue`
- **预置笔记数据**：`public/data/source-notes-preset.zh.json` 与 `public/data/source-notes-preset.en.json`（可选 `match/matchRegex` 锚点，减少代码变动导致的笔记错位）

### 3) Markdown 渲染：目录、代码高亮与交互

- **目标**：在纯前端渲染 Markdown，同时具备目录（ToC）、代码高亮、链接/图片等基础能力。
- **实现方式**：在客户端把 Markdown 解析为 HTML，再叠加目录生成与必要的安全处理（避免注入）。
- **相关模块**：`src/composables/useContentRenderer.ts`、`src/utils/sanitize.ts`

### 4) 全文搜索：为什么要“先生成索引”

- **目标**：不依赖后端、在浏览器内快速全文检索，并能高亮命中片段。
- **实现方式**：使用 MiniSearch 在客户端建立索引；先用标题/摘要索引快速可用，后台并发拉取全文补齐索引，并缓存完整索引以加速二次打开。
- **相关模块**：`src/composables/useSearch.ts`、`src/stores/articleStore.ts`

### 5) 发布工作台：纯静态环境下的“写作/上传/发布”

- **目标**：不跑服务端也能在网页端发布文章（含图片）。
- **实现方式**：通过 GitHub API 在浏览器端完成写入；当用户无写权限时走 Fork + PR，避免直接写上游仓库。
- **相关模块**：`src/composables/useGitHubPublish.ts`

### 6) Token 加密与备份：在浏览器侧做“安全的最低保障”

- **目标**：Token 不以明文落地；备份时避免把 Token 带走；尽量减少误泄漏风险。
- **实现方式**：AES-256-GCM 加密 + 基于浏览器指纹派生密钥；备份流程明确排除 Token。
- **相关模块**：`src/composables/useTokenSecurity.ts`、`src/composables/useBackup.ts`

---

## 🧩 静态部署的取舍

为了能在 GitHub Pages 这种纯静态托管里“零后端上线”，项目做了这些取舍：

- **把数据变成静态资源**：笔记索引、raw 源码、音乐/壁纸清单都在构建阶段生成到 `public/`，运行时只需要 `fetch()`。
- **写入能力转移到第三方 API**：发布/图片上传/云端备份依赖 GitHub API（用 Token 授权），站点自身不提供写接口。
- **权限与协作用 PR 兜底**：对无写权限用户，通过 Fork + PR 实现“可贡献但不可直接写上游”的协作模式。
- **主要限制**：
  - Token 存在于浏览器侧，即便加密也无法达到服务端级别的防护（XSS、防扩展窃取等需要额外策略）。
  - GitHub API 有速率限制与权限边界，且 PR 流程意味着“发布不一定即时生效”（需合并）。
  - 图片上传/大文件的体验受 GitHub 生态限制（大小、速度、可用性）。


---

## 📄 License

[MIT License](LICENSE) © 2024-present

---

<div align="center">

**🌸 愿这个项目成为你整理知识、分享生活的小花园 🌸**

Made with ❤️ by [soft-zihan](https://github.com/soft-zihan)

</div>
