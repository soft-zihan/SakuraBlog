{
  "version": "2026.02.01",
  "intro": "组合式函数：抽离可复用业务逻辑（Composition API）。",
  "notes": [
    {
      "matchRegex": "^export\\s+function\\s+useFile\\(",
      "content": "组合式函数用 export function 暴露。\n参数用 Ref<...> 标注类型，调用者传入响应式依赖。\n这体现了“依赖注入”，让逻辑可复用。"
    },
    {
      "matchRegex": "^\\s*const\\s+currentFile\\s*=\\s*ref",
      "content": "ref 用来创建响应式状态。\nref<T>(initial) 既标注类型又提供初始值。\n这里用 null 表示“当前未选文件”。"
    },
    {
      "matchRegex": "^\\s*const\\s+currentLangRoot\\s*=\\s*computed",
      "content": "computed 用于派生状态：依赖变化才重新计算。\n箭头函数返回根节点的 children，避免在模板里写复杂逻辑。\n返回值是只读的计算属性。"
    },
    {
      "matchRegex": "^\\s*const\\s+filteredFlatFiles\\s*=\\s*computed",
      "content": "在 computed 内部定义递归函数 flatten。\n函数返回 FileNode[]，通过类型注解确保返回值一致。\n递归 + concat 展平目录树是典型的函数式写法。"
    },
    {
      "matchRegex": "^\\s*const\\s+toggleFolder\\s*=\\s*\\(",
      "content": "函数表达式赋值给 const，形成稳定引用。\n通过 indexOf 查找，再用 splice 进行删除。\n这种“查找-切换”模式适合展开/收起状态。"
    },
    {
      "matchRegex": "^\\s*const\\s+updateUrl\\s*=\\s*\\(",
      "content": "try/catch 包裹浏览器 API，避免 SSR 或异常地址导致崩溃。\nURLSearchParams 适合读写 query string。\n函数参数允许 null 表示“清除路径”。"
    },
    {
      "matchRegex": "^\\s*return\\s*\\{",
      "content": "组合式函数返回一个对象作为公共 API。\n返回的 ref/computed 在组件中可直接解构使用。\n这里把状态、工具函数统一出口，便于维护。"
    }
  ]
}
