# ğŸŒ¸ Sakura Notes

<div align="center">

[![GitHub Pages](https://img.shields.io/badge/GitHub-Pages-222?logo=github)](https://soft-zihan.github.io/SakuraBlog/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Vue](https://img.shields.io/badge/Vue.js-3.x-4FC08D?logo=vue.js)](https://vuejs.org/)
[![Vite](https://img.shields.io/badge/Vite-4.4-646CFF?logo=vite)](https://vitejs.dev/)
[![zread](https://img.shields.io/badge/Ask_Zread-_.svg?style=flat&color=00b0aa&labelColor=000000&logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQuOTYxNTYgMS42MDAxSDIuMjQxNTZDMS44ODgxIDEuNjAwMSAxLjYwMTU2IDEuODg2NjQgMS42MDE1NiAyLjI0MDFWNC45NjAxQzEuNjAxNTYgNS4zMTM1NiAxLjg4ODEgNS42MDAxIDIuMjQxNTYgNS42MDAxSDQuOTYxNTZDNS4zMTUwMiA1LjYwMDEgNS42MDE1NiA1LjMxMzU2IDUuNjAxNTYgNC45NjAxVjIuMjQwMUM1LjYwMTU2IDEuODg2NjQgNS4zMTUwMiAxLjYwMDEgNC45NjE1NiAxLjYwMDFaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00Ljk2MTU2IDEwLjM5OTlIMi4yNDE1NkMxLjg4ODEgMTAuMzk5OSAxLjYwMTU2IDEwLjY4NjQgMS42MDE1NiAxMS4wMzk5VjEzLjc1OTlDMS42MDE1NiAxNC4xMTM0IDEuODg4MSAxNC4zOTk5IDIuMjQxNTYgMTQuMzk5OUg0Ljk2MTU2QzUuMzE1MDIgMTQuMzk5OSA1LjYwMTU2IDE0LjExMzQgNS42MDE1NiAxMy43NTk5VjExLjAzOTlDNS42MDE1NiAxMC42ODY0IDUuMzE1MDIgMTAuMzk5OSA0Ljk2MTU2IDEwLjM5OTlaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik0xMy43NTg0IDEuNjAwMUgxMS4wMzg0QzEwLjY4NSAxLjYwMDEgMTAuMzk4NCAxLjg4NjY0IDEwLjM5ODQgMi4yNDAxVjQuOTYwMUMxMC4zOTg0IDUuMzEzNTYgMTAuNjg1IDUuNjAwMSAxMS4wMzg0IDUuNjAwMUgxMy43NTg0QzE0LjExMTkgNS42MDAxIDE0LjM5ODQgNS4zMTM1NiAxNC4zOTk4IDQuOTYwMVYyLjI0MDFDMTQuMzk4NCAxLjg4NjY0IDE0LjExMTkgMS42MDAxIDEzLjc1ODQgMS42MDAxWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNNCAxMkwxMiA0TDQgMTJaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00IDEyTDEyIDQiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K&logoColor=ffffff)](https://zread.ai/soft-zihan/SakuraBlog)
[![DeepWiki](https://img.shields.io/badge/DeepWiki-_.svg?style=flat&color=00b0aa&labelColor=000000&logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTY)](https://deepwiki.com/soft-zihan/SakuraBlog)

<br/>

<div align="center">
  <h3>ğŸŒ¸ Sakura Notes (Sakura Blog)</h3>
  <p><b>Backend-free, SSG-free</b> Vue knowledge base & static blog, designed for GitHub Pages.</p>
  <p>
    <b>What makes it different</b><br/>
    â€¢ Build-time generates the notes index, rendered HTML, and raw sources<br/>
    â€¢ Browser publishing via GitHub API (smart Fork + PR fallback)<br/>
    â€¢ Runtime theming (CSS variables + Tailwind) with system/time-based dark mode<br/>
    â€¢ Learning Lab: an 8-stage roadmap plus an annotated Source Viewer
  </p>
  <p>
    <a href="https://soft-zihan.github.io/SakuraBlog/">ğŸŒ Live Demo</a> Â· 
    <a href="README_zh.md">ğŸ“– ä¸­æ–‡</a> Â· 
    <a href="https://github.com/soft-zihan/SakuraBlog/issues">ğŸ› Report Issues</a>
  </p>
</div>

</div>

![ç½‘é¡µé¢„è§ˆå›¾](./public/image/preview.png)

---
## ğŸ“‘ Table of Contents

- [âœ¨ Features Overview](#-features-overview)
- [ğŸ§  How Backend-free Works](#-how-backend-free-works)
- [ğŸ™ Credits](#-credits)
- [ğŸ¯ Quick Start](#-quick-start)
- [ğŸ§ª Testing](#-testing)
- [ğŸ“ Project Structure](#-project-structure)
- [ğŸ—ï¸ Technical Architecture](#ï¸-technical-architecture)
- [ğŸ”§ Configuration Guide](#-configuration-guide)
- [ Security &amp; Data](#-security--data)
- [ğŸ¤ Contribution Guide](#-contribution-guide)
- [ğŸ“œ Changelog](#-changelog)
- [ğŸ”¬ Implementation Deep Dive](#-implementation-deep-dive)
- [ğŸ§© Trade-offs for Static Deployment](#-trade-offs-for-static-deployment)
- [ğŸš€ Migrating to a Full-Stack App (No Fork+PR Dependency)](#-migrating-to-a-full-stack-app-no-forkpr-dependency)

---

## âœ¨ Features Overview

### ğŸ§© Backend-free by Design (Static Hosting First)

| Feature | Description |
| :-- | :-- |
| **Build-time data pipeline** | Generates `public/data/files.json`, pre-rendered HTML, raw source copies, and media manifests before deployment. |
| **Runtime = static fetch** | Notes and generated artifacts are loaded via `fetch()` from static hosting (GitHub Pages friendly). |
| **Local-first state** | Preferences, reading actions, and Lab progress persist in the browser (`localStorage` + Pinia). |
| **Optional integrations** | Comments (Giscus), reading stats (Umami Share Token API), and cloud backup (GitHub) without running your own backend. |

### âœï¸ Publishing Without a Server (GitHub-native)

| Feature | Description |
| :-- | :-- |
| **Publishing workbench** | Import/preview files, rename, choose folder, inject tags/author metadata, and publish from the browser. |
| **Real-time preview** | Live Markdown preview while editing. |
| **Auto image upload** | Local images referenced in Markdown can be uploaded to GitHub automatically. |
| **Smart Fork + PR** | Contributors without write access can fork and open a PR automatically (upstream stays protected). |

### ğŸ¨ Theme System (Runtime Skins, Not Just Dark Mode)

| Feature | Description |
| :-- | :-- |
| **Runtime palette switching** | Theme colors are CSS variables, consumed by Tailwind for a real â€œchange-the-whole-skinâ€ experience. |
| **Dark mode strategies** | Manual toggle, follow system, or auto-switch by time schedule. |
| **Wallpaper & ambience** | Wallpaper layers + music player; visual ambience is part of the reading experience. |
| **Sakura interaction layer** | Draggable petals and long-press vortex interaction, designed not to block page clicks. |

### ğŸ“± Mobile Polish

| Feature | Description |
| :-- | :-- |
| **Touch-native interactions** | Uses pointer events for both mouse and touch; drag interactions disable default touch actions when needed. |
| **Effects that donâ€™t block reading** | Background effects default to non-interactive layers; only petals are pointer-enabled. |
| **Mobile-safe links & assets** | Resolves internal links/images/PDF embeds with a GitHub Pages-friendly base URL strategy. |
| **Modal & reader ergonomics** | Search and panels use viewport-based heights and responsive layout to stay usable on small screens. |

### ğŸ§ª Learning Lab & Source Viewer

| Feature | Description |
| :-- | :-- |
| **8-stage roadmap** | A staged learning path (from Web basics to Vue 3 advanced and a final challenge). |
| **Progress persistence** | Tracks completion and recommends what to learn next, stored locally. |
| **Annotated source viewer** | Read real project files with preset notes and your own per-line notes. |
| **Productive reading tools** | Folding for functions/classes/Vue SFC blocks, plus import/export and GitHub submission for notes. |

### ğŸ“š Core Reading Experience

| Feature | Description |
| :-- | :-- |
| **Markdown + ToC + highlighting** | Markdown rendering with automatic ToC and syntax highlighting. |
| **Full-text search** | MiniSearch-based search with mixed CN/EN tokenization, incremental indexing, and cached index. |
| **Reader utilities** | Favorites, likes, tag filtering, and reading history. |
| **PDF friendly** | PDF links can be embedded for in-page reading and open/download actions. |

### ğŸ” Security & Data (Best-effort on the Client)

| Feature | Description |
| :-- | :-- |
| **Encrypted token storage** | AES-256-GCM with PBKDF2-derived device-bound key; tokens are never stored in plaintext. |
| **Backup exclusion** | Tokens are explicitly excluded from all backup flows. |
| **Local & cloud backups** | Backup/restore preferences and progress locally, or to GitHub (optional). |

---

## ğŸ§  How Backend-free Works

Sakura Notes runs as a static app by moving â€œdynamic needsâ€ to build time and keeping user data local.

```text
notes/ (Markdown knowledge base)
  â”‚
  â”œâ”€ build prep (scripts/*)
  â”‚    â”œâ”€ scan notes â†’ public/data/files.json
  â”‚    â”œâ”€ copy notes â†’ public/notes/**
  â”‚    â”œâ”€ pre-render â†’ public/rendered/** (HTML + ToC)
  â”‚    â””â”€ export source â†’ public/raw/** (for Source Viewer)
  â”‚
  â””â”€ vite build â†’ dist/
           â”‚
           â–¼
GitHub Pages (static hosting)
           â”‚
           â–¼
Browser runtime
  â”œâ”€ fetch() static assets (notes/index/rendered/raw)
  â”œâ”€ persist state in localStorage (preferences/progress)
  â””â”€ write operations (optional): GitHub API (token) + Fork+PR fallback
```

## ğŸ™ Credits

- Comments and reading stats implementation is inspired by [RyuChan](https://github.com/kobaridev/RyuChan).

## ğŸ¯ Quick Start

### Option 1: Fork & Deploy (Recommended)

1. **Fork the Repository**
   - Click the `Fork` button in the top right corner.
2. **Enable GitHub Pages**
   - Go to `Settings` â†’ `Pages`.
   - Set "Source" to `GitHub Actions`.
3. **Add Content**
   - Create `.md` files in `notes/zh/` or `notes/en/`.
   - Push your code; GitHub Actions will automatically build and deploy.
4. **Access Your Site**
   - `https://<your-username>.github.io/<repo-name>/`

### Option 2: Local Development

```bash
# Clone the repository
git clone https://github.com/soft-zihan/SakuraBlog.git
cd SakuraBlog

# Install dependencies
npm install

# Start development server
npm run dev

# Build for production
npm run build
```

### Option 3: Online Publishing

Visit [Sakura Notes](https://soft-zihan.github.io/SakuraBlog/) directly and click the Settings icon:

1. Enter your GitHub Token (requires `repo` scope).
2. Configure your target repository info.
3. Use the "Write" workbench to compose and publish; the system will automatically fork to your account.
4. A Pull Request will be created for you automatically.

---

## ğŸ§ª Testing

```bash
npm run test -- --run
```

---

## ğŸ“ Project Structure

```
sakura-notes/
â”œâ”€â”€ ğŸ“ scripts/              # Build prep scripts (generate data into public/)
â”‚   â”œâ”€â”€ generate-tree.ts
â”‚   â”œâ”€â”€ generate-raw.ts
â”‚   â”œâ”€â”€ generate-music.ts
â”‚   â””â”€â”€ generate-wallpapers.ts
â”œâ”€â”€ ğŸ“ src/                  # Source code
â”‚   â”œâ”€â”€ ğŸ“„ main.ts           # Vue app mount entry
â”‚   â”œâ”€â”€ ğŸ“„ App.vue           # Root component (Layout & State)
â”‚   â”œâ”€â”€ ğŸ“„ index.html        # HTML entry
â”‚   â”œâ”€â”€ ğŸ“„ constants.ts      # i18n constants
â”‚   â”œâ”€â”€ ğŸ“„ types.ts          # Global type definitions
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ views/            # Page Views
â”‚   â”‚   â””â”€â”€ ArticleReader.vue # Dedicated Article Reader & TOC
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ layout/           # Layout shells
â”‚   â”‚   â””â”€â”€ AppLayout.vue
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ components/       # Vue components
â”‚   â”‚   â”œâ”€â”€ AppHeader.vue      # Top navigation bar
â”‚   â”‚   â”œâ”€â”€ ArticleInfoBar.vue  # Article info / actions bar
â”‚   â”‚   â”œâ”€â”€ ArticleToc.vue      # Article table of contents (TOC)
â”‚   â”‚   â”œâ”€â”€ ThemePanel.vue     # Theme settings panel
â”‚   â”‚   â”œâ”€â”€ AppSidebar.vue     # Sidebar navigation
â”‚   â”‚   â”œâ”€â”€ SidebarFilterPanel.vue # Sidebar filters
â”‚   â”‚   â”œâ”€â”€ MainContent.vue    # Main content area
â”‚   â”‚   â”œâ”€â”€ ğŸ“ Modals/         # Modal components
â”‚   â”‚   â”‚   â”œâ”€â”€ CodeModal.vue
â”‚   â”‚   â”‚   â””â”€â”€ Lightbox.vue
â”‚   â”‚   â””â”€â”€ ğŸ“ lab/            # Learning Lab system
â”‚   â”‚       â”œâ”€â”€ LabDashboard.vue
â”‚   â”‚       â”œâ”€â”€ SourceCodeViewer.vue
â”‚   â”‚       â”œâ”€â”€ ğŸ“ stage1-foundation/ ... ğŸ“ stage8-challenge/
â”‚   â”‚       â””â”€â”€ ğŸ“ stages/        # Lab stage wrapper pages
â”‚   â”‚           â””â”€â”€ StageLearningGuide.vue
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ composables/      # Vue 3 Composables (Logic Reuse)
â”‚   â”‚   â”œâ”€â”€ useArticleMeta.ts  # Metadata extraction
â”‚   â”‚   â”œâ”€â”€ useContentRenderer.ts # Markdown rendering
â”‚   â”‚   â”œâ”€â”€ useFile.ts         # File operations
â”‚   â”‚   â”œâ”€â”€ useUmamiViewStats.ts # Umami Share Token stats
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ stores/           # Pinia state management
â”‚       â”œâ”€â”€ appStore.ts        # Global app settings
â”‚       â”œâ”€â”€ articleStore.ts    # Article interactions
â”‚       â”œâ”€â”€ articleNavStore.ts # Article TOC & navigation
â”‚       â”œâ”€â”€ learningStore.ts   # Learning progress
â”‚       â””â”€â”€ musicStore.ts      # Music player state
â”‚
â”‚   â”œâ”€â”€ ğŸ“ locales/          # i18n locales
â”‚   â”‚   â”œâ”€â”€ en.ts
â”‚   â”‚   â””â”€â”€ zh.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ styles/           # Global styles
â”‚   â”‚   â””â”€â”€ app.css
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ utils/            # Utility functions
â”‚   â”‚   â”œâ”€â”€ fileUtils.ts
â”‚   â”‚   â”œâ”€â”€ i18nText.ts
â”‚   â”‚   â”œâ”€â”€ sanitize.ts
â”‚   â”‚   â”œâ”€â”€ storage.ts
â”‚   â”‚   â””â”€â”€ wallhavenApi.ts
â”‚
â”œâ”€â”€ ğŸ“ public/              # Static assets (generated data)
â”‚   â”œâ”€â”€ ğŸ“ data/
â”‚   â”‚   â”œâ”€â”€ files.json
â”‚   â”‚   â”œâ”€â”€ music.json
â”‚   â”‚   â”œâ”€â”€ wallpapers.json
â”‚   â”‚   â”œâ”€â”€ ğŸ“ source-notes-preset/  # Per-file notes preset (Source Viewer)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ zh/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ en/
â”‚   â”‚   â”œâ”€â”€ source-notes-preset.zh.json
â”‚   â”‚   â””â”€â”€ source-notes-preset.en.json
â”‚   â”œâ”€â”€ ğŸ“ raw/              # Generated raw source files for Source Viewer
â”‚   â””â”€â”€ ğŸ“ notes/
â”‚
â”œâ”€â”€ ğŸ“„ vite.config.ts      # Vite build configuration
â””â”€â”€ ğŸ“„ tsconfig.json       # TypeScript configuration
```

---

## ğŸ—ï¸ Technical Architecture

### Core Tech Stack

| Tech                   | Version | Purpose                              |
| :--------------------- | :------ | :----------------------------------- |
| **Vue 3**        | 3.5     | Frontend framework (Composition API) |
| **TypeScript**   | 5.4     | Type safety                          |
| **Vite**         | 4.4     | Build tool                           |
| **Pinia**        | 3.0     | State management                     |
| **Tailwind CSS** | 3.x     | Utility-first CSS                    |
| **Highlight.js** | 11.9    | Code syntax highlighting             |
| **MiniSearch**   | 7.1     | Full-text search engine              |
| **Marked**       | 12.0    | Markdown parsing                     |

### Build Workflow

```bash
npm run build
# This triggers:
# 1. scripts/generate-tree.ts         â†’ Mirrors notes/, generates files.json, and exports source files into /public/raw
# 2. scripts/generate-raw.ts          â†’ Legacy raw exporter (kept for compatibility; generate-tree already exports raw files)
# 3. scripts/generate-music.ts        â†’ Scans public/music/ for music.json
# 4. scripts/generate-wallpapers.ts   â†’ Scans wallpapers to create wallpapers.json
# 5. vite build                       â†’ Bundles the Vue application
```

---

## ğŸ”§ Configuration Guide

### GitHub Token Configuration

The publishing feature requires a Personal Access Token:

1. Go to [GitHub Settings â†’ Developer settings â†’ Personal access tokens](https://github.com/settings/tokens).
2. Create a token with the `repo` scope.
3. Enter the token in the site's Settings panel.

> âš ï¸ The token is stored using AES-256-GCM encryption with a key derived from your browser fingerprint.

### Giscus Comments

1. Enable [GitHub Discussions](https://docs.github.com/en/discussions) in your repo.
2. Install the [Giscus App](https://github.com/apps/giscus).
3. Get your configuration parameters from [giscus.app](https://giscus.app/).
4. Update the configuration in `components/GiscusComments.vue`.

### Reading Stats (Umami Cloud, optional)

Inspired by RyuChan, Sakura Notes uses Umami as the source of truth: the tracker records pageviews, and the UI reads stats via the Share Token API. Since this project uses static hosting + query navigation, each article is mapped to a virtual path `/notes/<filePath>` for per-article stats.

1. Create a website in Umami Cloud.
2. Copy the `websiteId` from the tracking script snippet in Umami.
3. Enable sharing for that website, then copy the `shareId` from the Share URL (the last path segment).
4. Create `.env` (or `.env.local`) and set:

   ```bash
   VITE_UMAMI_SCRIPT_URL=https://cloud.umami.is/script.js
   VITE_UMAMI_WEBSITE_ID=<your-website-id>
   VITE_UMAMI_BASE_URL=https://cloud.umami.is
   VITE_UMAMI_SHARE_ID=<your-share-id>
   VITE_UMAMI_TIMEZONE=Asia/Shanghai
   ```

5. Rebuild and deploy.

---

## ğŸ” Security & Data

### Token Security Strategy

- **AES-256-GCM**: Industry-standard symmetric encryption.
- **Device-bound Key**: The key is derived from browser/device traits (userAgent, screen, timezone, language, etc.) plus a per-token salt.
- **Backup Exclusion**: Tokens are strictly excluded from all backup operations.
- **Direct API Use**: Tokens are only sent to the GitHub API, never to any third-party servers.

### localStorage Content

| Data Type    | Key Prefix                 | Description                       |
| :----------- | :------------------------- | :-------------------------------- |
| Preferences  | `app-store`              | Themes, fonts, wallpaper settings |
| Interactions | `article-store`          | Favorites, likes                  |
| Repo Config  | `github_*`               | Repository info, author name      |
| Backups      | `backup_*`               | Backup data (import/export)       |
| Token        | `github_pat_*`           | Encrypted token materials (excluded from backups) |

> âš ï¸ **Warning**: Clearing browser data will delete these settings. Please use the backup feature regularly!

---

## ğŸ¤ Contribution Guide

### Contributing Content (Notes/Articles)

**Method 1: Web Interface**

1. Visit the live site and configure your Token.
2. Use the Workbench to write and publish.
3. The system will create a PR for you automatically.

**Method 2: Direct PR**

1. Fork the repo.
2. Add `.md` files to the `notes/` directory.
3. Submit a PR to the `main` branch.

### Commit Conventions

- `feat`: New feature
- `fix`: Bug fix
- `docs`: Documentation update
- `refactor`: Code refactoring
- `chore`: Build/tool changes

---

## ğŸ“œ Changelog

### v1.1

- ğŸ› Fixed 404 error for non-owner submissions.
- ğŸ”§ Optimized permission checks (Smart Fork + PR logic).
- ğŸ” Added AES-256-GCM encryption for Tokens.
- ğŸ’¾ Added local backup system (Import/Export).
- ğŸ‘ï¸ Added real-time preview to the Publishing Workbench.
- ğŸ§ª Completed 8-stage Learning Lab path.
- ğŸŒ¸ Added draggable Sakura petal system.
- ğŸ” Integrated full-text search.

### v1.0

- ğŸ‰ Initial release.
- ğŸ“ Basic Markdown note system.
- ğŸŒ Multi-language support.
- ğŸ“± Responsive design.

---

## ğŸ”¬ Implementation Deep Dive

This section explains the critical paths that make the project work as a fully static site: what gets generated at build time, what is loaded at runtime, and why the design is structured this way.

### 1) Notes tree index: from `notes/` to runtime-consumable data

- **Goal**: Let the frontend quickly know what files/folders exist and their metadata, without a backend.
- **How**: A build-prep script scans `notes/`, generates an index JSON, and mirrors Markdown files into `public/notes/` so the browser can `fetch()` them.
- **Key script**: `scripts/generate-tree.ts`
- **Outputs**: `public/data/files.json`, `public/notes/**`

### 2) Source viewer: reading project source code inside the site

- **Goal**: Display this projectâ€™s own Vue components / utilities as readable source code in the Learning Lab, with â€œpreset notesâ€ that guide the reader.
- **How**:
  - A build-prep script generates a â€œProject Source Codeâ€ tree and exports source files into `public/raw/` (so production doesnâ€™t need direct access to `src/`).
  - The frontend loads these raw text files and overlays preset notes (and user notes) for navigation and explanations.
- **Key script**: `scripts/generate-tree.ts`
- **Key component**: `src/components/lab/SourceCodeViewer.vue`
- **Preset notes data**: `public/data/source-notes-preset.zh.json` and `public/data/source-notes-preset.en.json` (optional `match/matchRegex` anchors reduce drift when code changes)
- **Note**: `src/utils/i18nText.ts` is not the UI i18n dictionary (that lives in `src/locales/*`). It only helps anchoring preset notes to code lines.

### 3) Markdown rendering: ToC, code highlighting, and safety

- **Goal**: Render Markdown client-side with a Table of Contents, syntax highlighting, and safe HTML.
- **How**: Parse Markdown into HTML, generate ToC, and sanitize output to reduce injection risks.
- **Relevant modules**: `src/composables/useContentRenderer.ts`, `src/utils/sanitize.ts`

### 4) Full-text search: why indexing matters

- **Goal**: Provide fast in-browser search with hit highlighting, without server-side search.
- **How**: Use MiniSearch on the client, combined with metadata and loading strategies to keep initial load reasonable.
- **Relevant modules**: `src/composables/useSearch.ts`, `src/stores/articleStore.ts`

### 5) Publishing workbench: â€œwrite + upload + publishâ€ in a static world

- **Goal**: Publish notes directly from the browser, including image uploads, without running your own backend.
- **How**: Use GitHub APIs for write operations; for users without write access, fall back to Fork + PR so contributions still work.
- **Relevant module**: `src/composables/useGitHubPublish.ts`

### 6) Token security and backups: best-effort protection in the browser

- **Goal**: Avoid storing GitHub Tokens in plaintext and never include them in backups.
- **How**: AES-256-GCM encryption with keys derived from a browser fingerprint; backup flow explicitly excludes tokens.
- **Relevant modules**: `src/composables/useTokenSecurity.ts`, `src/composables/useBackup.ts`

---

## ğŸ§© Trade-offs for Static Deployment

To run on GitHub Pages (or any static hosting) with no backend, the project makes these trade-offs:

- **Make runtime data a build artifact**: notes index, raw source copies, music/wallpaper lists are generated into `public/` during build time.
- **Outsource write operations to third-party APIs**: publishing/image uploads/cloud backup rely on GitHub APIs (authorized by a token).
- **Use PR as a collaboration boundary**: when a user lacks write access, Fork + PR enables contribution while protecting the upstream repo.
- **Key limitations**:
  - Tokens exist in the browser; encryption helps, but it is not the same security posture as a server-side secret.
  - GitHub APIs have rate limits and permission boundaries; PR-based publishing is not instantly live (merge required).
  - Upload size/latency/availability are bounded by the GitHub ecosystem.

---


## ğŸ“„ License

[MIT License](LICENSE) Â© 2024-present

---

<div align="center">

**ğŸŒ¸ May this project become your little garden for organizing knowledge and sharing your life ğŸŒ¸**

Made with â¤ï¸ by [soft-zihan](https://github.com/soft-zihan)

</div>
