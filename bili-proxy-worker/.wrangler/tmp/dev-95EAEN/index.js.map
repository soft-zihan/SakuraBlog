{
  "version": 3,
  "sources": ["../../../src/index.ts", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-DewmVH/middleware-insertion-facade.js", "../../../node_modules/wrangler/templates/middleware/common.ts", "../bundle-DewmVH/middleware-loader.entry.ts"],
  "sourceRoot": "D:\\_git\\soft-zihan.github.io\\bili-proxy-worker\\.wrangler\\tmp\\dev-95EAEN",
  "sourcesContent": ["type Env = {\n  ALLOW_ORIGIN?: string\n}\n\ntype JsonValue =\n  | string\n  | number\n  | boolean\n  | null\n  | JsonValue[]\n  | { [k: string]: JsonValue }\n\nconst MIXIN_INDEX = [\n  46, 47, 18, 2, 53, 8, 23, 32, 15, 50, 10, 31, 58, 3, 45, 35, 27, 43, 5,\n  49, 33, 9, 42, 19, 29, 28, 14, 39, 12, 38, 41, 13, 37, 48, 7, 16, 24, 55,\n  40, 61, 26, 17, 0, 1, 60, 51, 30, 4, 22, 25, 54, 21, 56, 62, 6, 63, 57,\n  20, 34, 52, 59, 11, 36, 44\n]\n\nconst UA_PC =\n  \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36\"\nconst UA_FP =\n  \"Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1 Edg/114.0.0.0\"\nconst REFERER = \"https://www.bilibili.com\"\n\nconst API_BASE = \"https://api.bilibili.com\"\nconst URL_NAV = `${API_BASE}/x/web-interface/nav`\nconst URL_FINGERPRINT = `${API_BASE}/x/frontend/finger/spi`\nconst URL_WBI_SEARCH = `${API_BASE}/x/web-interface/wbi/search/type`\nconst URL_WBI_VIEW = `${API_BASE}/x/web-interface/wbi/view`\nconst URL_WBI_PLAYURL = `${API_BASE}/x/player/wbi/playurl`\nconst URL_WEB_TICKET = `${API_BASE}/bapis/bilibili.api.ticket.v1.Ticket/GenWebTicket`\n\nconst UA_TICKET = \"Mozilla/5.0 (X11; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/115.0\"\nconst WEB_TICKET_KEY = \"XgwSnGZ1p\"\n\ntype CachedValue<T> = { value: T; cachedAt: number; ttlMs: number }\n\nconst cache: {\n  mixinKey?: CachedValue<string>\n  anonCookieHeader?: CachedValue<string>\n} = {}\n\nfunction nowMs() {\n  return Date.now()\n}\n\nfunction isFresh(v?: CachedValue<unknown>) {\n  if (!v) return false\n  return nowMs() - v.cachedAt < v.ttlMs\n}\n\nfunction json(data: JsonValue, init?: ResponseInit) {\n  const headers = new Headers(init?.headers)\n  headers.set(\"Content-Type\", \"application/json; charset=utf-8\")\n  return new Response(JSON.stringify(data), { ...init, headers })\n}\n\nfunction corsHeaders(request: Request, env: Env) {\n  const allowOriginRaw = env.ALLOW_ORIGIN?.trim() || \"*\"\n  const origin = request.headers.get(\"Origin\") || \"\"\n\n  const tokens = allowOriginRaw\n    .split(\",\")\n    .map((s) => s.trim())\n    .filter(Boolean)\n\n  const matchToken = (token: string, value: string) => {\n    if (token === \"*\") return true\n    if (token.endsWith(\"*\")) return value.startsWith(token.slice(0, -1))\n    return token === value\n  }\n\n  const isWildcard = tokens.includes(\"*\") || allowOriginRaw === \"*\"\n  const allow = isWildcard\n    ? \"*\"\n    : origin && tokens.some((t) => matchToken(t, origin))\n      ? origin\n      : tokens[0] || \"*\"\n\n  const baseAllowHeaders = [\"Content-Type\", \"Range\", \"X-Bili-Cookie\"]\n  const reqAllowHeaders = (request.headers.get(\"Access-Control-Request-Headers\") || \"\")\n    .split(\",\")\n    .map((s) => s.trim())\n    .filter(Boolean)\n  const allowHeaders = Array.from(new Set([...baseAllowHeaders, ...reqAllowHeaders])).join(\",\")\n\n  return {\n    \"Access-Control-Allow-Origin\": allow,\n    \"Access-Control-Allow-Methods\": \"GET,POST,OPTIONS\",\n    \"Access-Control-Allow-Headers\": allowHeaders,\n    \"Access-Control-Expose-Headers\":\n      \"Content-Length,Content-Range,Accept-Ranges,Content-Type\",\n    \"Access-Control-Max-Age\": \"86400\"\n  }\n}\n\nfunction withCors(request: Request, env: Env, response: Response) {\n  const headers = new Headers(response.headers)\n  const cors = corsHeaders(request, env)\n  for (const [k, v] of Object.entries(cors)) headers.set(k, v)\n  headers.set(\"Vary\", \"Origin\")\n  return new Response(response.body, {\n    status: response.status,\n    statusText: response.statusText,\n    headers\n  })\n}\n\nfunction okText(text: string, init?: ResponseInit) {\n  const headers = new Headers(init?.headers)\n  headers.set(\"Content-Type\", \"text/plain; charset=utf-8\")\n  return new Response(text, { ...init, headers })\n}\n\nfunction readHeaderCookie(request: Request) {\n  const v = request.headers.get(\"X-Bili-Cookie\")\n  if (!v) return null\n  const trimmed = v.trim()\n  return trimmed.length ? trimmed : null\n}\n\nasync function md5Hex(input: string) {\n  const buf = new TextEncoder().encode(input)\n  const hash = await crypto.subtle.digest(\"MD5\", buf)\n  return [...new Uint8Array(hash)].map((b) => b.toString(16).padStart(2, \"0\")).join(\"\")\n}\n\nasync function hmacSha256Hex(key: string, message: string) {\n  const enc = new TextEncoder()\n  const cryptoKey = await crypto.subtle.importKey(\"raw\", enc.encode(key), { name: \"HMAC\", hash: \"SHA-256\" }, false, [\n    \"sign\"\n  ])\n  const sig = await crypto.subtle.sign(\"HMAC\", cryptoKey, enc.encode(message))\n  return [...new Uint8Array(sig)].map((b) => b.toString(16).padStart(2, \"0\")).join(\"\")\n}\n\nfunction filterValue(v: string) {\n  return v.replace(/[!'()*]/g, \"\")\n}\n\nfunction getCookieValue(cookieHeader: string | null, name: string) {\n  if (!cookieHeader) return \"\"\n  const re = new RegExp(`(?:^|;\\\\s*)${name}=([^;]*)`)\n  const m = cookieHeader.match(re)\n  return m?.[1] || \"\"\n}\n\nfunction makeMixinKey(imgUrl: string, subUrl: string) {\n  const imgKey = imgUrl.split(\"/\").pop()?.split(\".\")[0] || \"\"\n  const subKey = subUrl.split(\"/\").pop()?.split(\".\")[0] || \"\"\n  if (!imgKey || !subKey) throw new Error(\"Invalid wbi img/sub url\")\n  const raw = imgKey + subKey\n  let mixed = \"\"\n  for (const idx of MIXIN_INDEX) {\n    if (idx < raw.length) mixed += raw[idx]\n  }\n  return mixed.slice(0, 32)\n}\n\nasync function fetchMixinKeyFromTicket(cookieHeader: string | null) {\n  const ts = Math.floor(Date.now() / 1000)\n  const hexsign = await hmacSha256Hex(WEB_TICKET_KEY, `ts${ts}`)\n\n  const url = new URL(URL_WEB_TICKET)\n  url.searchParams.set(\"key_id\", \"ec02\")\n  url.searchParams.set(\"hexsign\", hexsign)\n  url.searchParams.set(\"context[ts]\", String(ts))\n\n  const csrf = getCookieValue(cookieHeader, \"bili_jct\")\n  if (csrf) url.searchParams.set(\"csrf\", csrf)\n\n  const headers = new Headers()\n  headers.set(\"User-Agent\", UA_TICKET)\n\n  const res = await fetch(url.toString(), { method: \"POST\", headers })\n  const text = await res.text()\n  const root = JSON.parse(text) as any\n  const data = root?.data || {}\n  const nav = data?.nav || {}\n  const imgUrl = nav.img || \"\"\n  const subUrl = nav.sub || \"\"\n  return makeMixinKey(imgUrl, subUrl)\n}\n\nasync function getOrRefreshMixinKey(cookieHeader: string | null) {\n  if (isFresh(cache.mixinKey)) return cache.mixinKey!.value\n\n  let mk = \"\"\n  try {\n    const headers = new Headers()\n    headers.set(\"User-Agent\", UA_PC)\n    headers.set(\"Referer\", REFERER)\n    if (cookieHeader) headers.set(\"Cookie\", cookieHeader)\n\n    const res = await fetch(URL_NAV, { headers })\n    const text = await res.text()\n    const root = JSON.parse(text) as any\n    const data = root?.data\n    const wbiImg = data?.wbi_img || data?.nav || {}\n    const imgUrl = wbiImg.img_url || wbiImg.img || \"\"\n    const subUrl = wbiImg.sub_url || wbiImg.sub || \"\"\n    mk = makeMixinKey(imgUrl, subUrl)\n  } catch {\n    mk = await fetchMixinKeyFromTicket(cookieHeader)\n  }\n  cache.mixinKey = { value: mk, cachedAt: nowMs(), ttlMs: 10 * 60 * 1000 }\n  return mk\n}\n\nasync function getOrRefreshAnonCookieHeader() {\n  if (isFresh(cache.anonCookieHeader)) return cache.anonCookieHeader!.value\n\n  const headers = new Headers()\n  headers.set(\"User-Agent\", UA_FP)\n  const res = await fetch(URL_FINGERPRINT, { headers })\n  const text = await res.text()\n  const root = JSON.parse(text) as any\n  const data = root?.data || {}\n  const cookiePairs: string[] = []\n  const put = (k: string, v: string | undefined) => {\n    const val = (v || \"\").trim()\n    if (val) cookiePairs.push(`${k}=${val}`)\n  }\n  put(\"buvid3\", data.b_3 || data.buvid3)\n  put(\"buvid4\", data.b_4 || data.buvid4)\n  put(\"buvid_fp\", data.buvid_fp)\n  put(\"buvid_fp_plain\", data.buvid_fp_plain)\n  put(\"b_lsid\", data.b_lsid)\n\n  const header = cookiePairs.join(\"; \")\n  cache.anonCookieHeader = {\n    value: header,\n    cachedAt: nowMs(),\n    ttlMs: 60 * 60 * 1000\n  }\n  return header\n}\n\nasync function signWbiUrl(baseUrl: string, paramsIn: Record<string, string>, cookieHeader: string | null) {\n  const mk = await getOrRefreshMixinKey(cookieHeader)\n  const params = new Map<string, string>()\n  for (const [k, v] of Object.entries(paramsIn)) params.set(k, filterValue(v))\n  params.set(\"wts\", String(Math.floor(Date.now() / 1000)))\n  const sorted = [...params.entries()].sort(([a], [b]) => a.localeCompare(b))\n  const query = sorted\n    .map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)\n    .join(\"&\")\n  const wRid = await md5Hex(query + mk)\n  const url = new URL(baseUrl)\n  for (const [k, v] of sorted) url.searchParams.set(k, v)\n  url.searchParams.set(\"w_rid\", wRid)\n  return url.toString()\n}\n\nasync function forwardJsonWithWbi(request: Request, env: Env, upstreamBaseUrl: string, params: Record<string, string>) {\n  const userCookie = readHeaderCookie(request)\n  const cookie = userCookie || (await getOrRefreshAnonCookieHeader())\n\n  const signed = await signWbiUrl(upstreamBaseUrl, params, cookie)\n  const headers = new Headers()\n  headers.set(\"User-Agent\", UA_PC)\n  headers.set(\"Referer\", REFERER)\n  headers.set(\"Cookie\", cookie)\n\n  const res = await fetch(signed, { headers })\n  const body = await res.text()\n  const proxied = new Response(body, {\n    status: res.status,\n    headers: { \"Content-Type\": \"application/json; charset=utf-8\" }\n  })\n  return withCors(request, env, proxied)\n}\n\nasync function cachedJson(\n  request: Request,\n  env: Env,\n  cacheKeyUrl: string,\n  ttlSeconds: number,\n  fetcher: () => Promise<Response>\n) {\n  const userCookie = readHeaderCookie(request)\n  if (userCookie) return fetcher()\n\n  const origin = request.headers.get(\"Origin\") || \"\"\n  const cacheUrl = new URL(cacheKeyUrl)\n  cacheUrl.searchParams.set(\"_o\", origin)\n\n  const cache = (globalThis as any).caches.default as Cache\n  const cacheReq = new Request(cacheUrl.toString(), { method: \"GET\" })\n  const hit = await cache.match(cacheReq)\n  if (hit) return hit\n\n  const res = await fetcher()\n  const headers = new Headers(res.headers)\n  headers.set(\"Cache-Control\", `public, max-age=${ttlSeconds}`)\n  const toCache = new Response(res.body, { status: res.status, headers })\n  await cache.put(cacheReq, toCache.clone())\n  return toCache\n}\n\ntype AudioPrefer = \"lossless\" | \"dolby\" | \"high\" | \"medium\" | \"low\" | \"best\"\n\nfunction pickAudioUrl(playInfo: any, prefer: AudioPrefer) {\n  const dash = playInfo?.data?.dash\n  const dolby = dash?.dolby\n  const flac = dash?.flac\n  const dashAudio = Array.isArray(dash?.audio) ? dash.audio : []\n  const dolbyAudio = Array.isArray(dolby?.audio) ? dolby.audio : []\n  const flacAudio = flac?.audio\n\n  const dashSorted = [...dashAudio].sort((a, b) => (b?.bandwidth || 0) - (a?.bandwidth || 0))\n  const dolbySorted = [...dolbyAudio].sort((a, b) => (b?.bandwidth || 0) - (a?.bandwidth || 0))\n\n  const pickDashByLevel = (level: \"high\" | \"medium\" | \"low\") => {\n    if (!dashSorted.length) return null\n    if (dashSorted.length === 1) return dashSorted[0]?.baseUrl || dashSorted[0]?.base_url || null\n    if (level === \"high\") return dashSorted[0]?.baseUrl || dashSorted[0]?.base_url || null\n    if (level === \"low\") return dashSorted[dashSorted.length - 1]?.baseUrl || dashSorted[dashSorted.length - 1]?.base_url || null\n    const mid = dashSorted[Math.floor(dashSorted.length / 2)]\n    return mid?.baseUrl || mid?.base_url || null\n  }\n\n  if (prefer === \"lossless\") {\n    const url = flacAudio?.baseUrl || flacAudio?.base_url\n    if (url) return url\n    return dolbySorted[0]?.baseUrl || dolbySorted[0]?.base_url || pickDashByLevel(\"high\")\n  }\n\n  if (prefer === \"dolby\") {\n    return dolbySorted[0]?.baseUrl || dolbySorted[0]?.base_url || pickDashByLevel(\"high\")\n  }\n\n  if (prefer === \"high\" || prefer === \"medium\" || prefer === \"low\") {\n    return pickDashByLevel(prefer)\n  }\n\n  const best =\n    flacAudio?.baseUrl ||\n    flacAudio?.base_url ||\n    dolbySorted[0]?.baseUrl ||\n    dolbySorted[0]?.base_url ||\n    dashSorted[0]?.baseUrl ||\n    dashSorted[0]?.base_url\n\n  return best || null\n}\n\nfunction pickMp4Url(playInfo: any) {\n  const durl = playInfo?.data?.durl\n  const first = Array.isArray(durl) ? durl[0] : null\n  return first?.url || null\n}\n\nasync function proxyStream(request: Request, env: Env, upstreamUrl: string, cookieHeader: string | null) {\n  const range = request.headers.get(\"Range\")\n  const headers = new Headers()\n  headers.set(\"User-Agent\", UA_PC)\n  headers.set(\"Referer\", REFERER)\n  if (cookieHeader) headers.set(\"Cookie\", cookieHeader)\n  if (range) headers.set(\"Range\", range)\n\n  const upstreamRes = await fetch(upstreamUrl, { headers })\n  const outHeaders = new Headers(upstreamRes.headers)\n  outHeaders.set(\"Accept-Ranges\", upstreamRes.headers.get(\"Accept-Ranges\") || \"bytes\")\n  outHeaders.delete(\"Set-Cookie\")\n\n  const response = new Response(upstreamRes.body, {\n    status: upstreamRes.status,\n    headers: outHeaders\n  })\n  return withCors(request, env, response)\n}\n\nasync function handleAudio(request: Request, env: Env, url: URL) {\n  const bvid = url.searchParams.get(\"bvid\") || \"\"\n  const cid = url.searchParams.get(\"cid\") || \"\"\n  const prefer = (url.searchParams.get(\"prefer\") || \"best\") as AudioPrefer\n  const mode = (url.searchParams.get(\"mode\") || \"dash\").toLowerCase()\n  const qn = url.searchParams.get(\"qn\")\n  const download = url.searchParams.get(\"download\") === \"1\"\n  const filename = (url.searchParams.get(\"filename\") || \"\").trim()\n\n  if (!bvid || !cid) return withCors(request, env, json({ error: \"Missing bvid/cid\" }, { status: 400 }))\n\n  const userCookie = readHeaderCookie(request)\n  const cookie = userCookie || (await getOrRefreshAnonCookieHeader())\n\n  const params: Record<string, string> = {\n    bvid,\n    cid,\n    fnval: \"272\",\n    fnver: \"0\",\n    fourk: \"0\",\n    otype: \"json\",\n    platform: mode === \"html5\" ? \"html5\" : \"pc\"\n  }\n  if (qn) params.qn = qn\n  if (mode === \"html5\") {\n    params.fnval = \"0\"\n  }\n\n  const signed = await signWbiUrl(URL_WBI_PLAYURL, params, cookie)\n  const headers = new Headers()\n  headers.set(\"User-Agent\", UA_PC)\n  headers.set(\"Referer\", REFERER)\n  headers.set(\"Cookie\", cookie)\n\n  const playRes = await fetch(signed, { headers })\n  const playText = await playRes.text()\n  const playJson = JSON.parse(playText) as any\n\n  const upstreamUrl = mode === \"html5\" ? pickMp4Url(playJson) : pickAudioUrl(playJson, prefer)\n  if (!upstreamUrl) {\n    return withCors(\n      request,\n      env,\n      json(\n        {\n          error: \"No playable url\",\n          code: playJson?.code,\n          message: playJson?.message\n        },\n        { status: 502 }\n      )\n    )\n  }\n\n  const proxied = await proxyStream(request, env, upstreamUrl, cookie)\n  if (!download || !filename) return proxied\n\n  const headersOut = new Headers(proxied.headers)\n  const safe = filename.replace(/[\\\\/:*?\"<>|]+/g, \" \").trim() || \"bili-audio.mp4\"\n  headersOut.set(\"Content-Disposition\", `attachment; filename*=UTF-8''${encodeURIComponent(safe)}`)\n  return new Response(proxied.body, { status: proxied.status, headers: headersOut })\n}\n\nfunction normalizeImageUrl(input: string) {\n  const raw = (input || \"\").trim()\n  if (!raw) return \"\"\n  if (raw.startsWith(\"//\")) return `https:${raw}`\n  if (raw.startsWith(\"http://\")) return raw.replace(\"http://\", \"https://\")\n  return raw\n}\n\nfunction isAllowedImageHost(hostname: string) {\n  const h = hostname.toLowerCase()\n  return h === \"hdslb.com\" || h.endsWith(\".hdslb.com\")\n}\n\nasync function handleImage(request: Request, env: Env, url: URL) {\n  const target = normalizeImageUrl(url.searchParams.get(\"url\") || \"\")\n  if (!target) return withCors(request, env, json({ error: \"Missing url\" }, { status: 400 }))\n\n  let u: URL\n  try {\n    u = new URL(target)\n  } catch {\n    return withCors(request, env, json({ error: \"Invalid url\" }, { status: 400 }))\n  }\n\n  if (u.protocol !== \"https:\" || !isAllowedImageHost(u.hostname)) {\n    return withCors(request, env, json({ error: \"Not allowed\" }, { status: 403 }))\n  }\n\n  const origin = request.headers.get(\"Origin\") || \"\"\n  const cacheUrl = new URL(request.url)\n  cacheUrl.searchParams.set(\"_o\", origin)\n\n  const cache = (globalThis as any).caches.default as Cache\n  const cacheReq = new Request(cacheUrl.toString(), { method: \"GET\" })\n  const hit = await cache.match(cacheReq)\n  if (hit) return withCors(request, env, hit)\n\n  const headers = new Headers()\n  headers.set(\"User-Agent\", UA_PC)\n  headers.set(\"Referer\", REFERER)\n\n  const res = await fetch(u.toString(), { headers })\n  const outHeaders = new Headers(res.headers)\n  outHeaders.delete(\"Set-Cookie\")\n  outHeaders.set(\"Cache-Control\", \"public, max-age=604800\")\n  const proxied = new Response(res.body, { status: res.status, headers: outHeaders })\n  await cache.put(cacheReq, proxied.clone())\n  return withCors(request, env, proxied)\n}\n\nfunction routeNotFound(request: Request, env: Env) {\n  return withCors(request, env, json({ error: \"Not found\" }, { status: 404 }))\n}\n\nexport default {\n  async fetch(request: Request, env: Env): Promise<Response> {\n    const url = new URL(request.url)\n    const cors = corsHeaders(request, env)\n\n    if (request.method === \"OPTIONS\") {\n      return new Response(null, { status: 204, headers: cors })\n    }\n\n    try {\n      if (url.pathname === \"/health\") {\n        return withCors(request, env, okText(\"ok\"))\n      }\n\n      if (request.method !== \"GET\") {\n        return withCors(request, env, json({ error: \"Method not allowed\" }, { status: 405 }))\n      }\n\n      if (url.pathname === \"/api/bili/search\") {\n        const q = url.searchParams.get(\"q\") || \"\"\n        const page = url.searchParams.get(\"page\") || \"1\"\n        if (!q) return withCors(request, env, json({ error: \"Missing q\" }, { status: 400 }))\n        return cachedJson(request, env, url.toString(), 60, () =>\n          forwardJsonWithWbi(request, env, URL_WBI_SEARCH, {\n            search_type: \"video\",\n            keyword: q,\n            page\n          })\n        )\n      }\n\n      if (url.pathname === \"/api/bili/view\") {\n        const aid = url.searchParams.get(\"aid\")\n        const bvid = url.searchParams.get(\"bvid\")\n        if (!aid && !bvid) return withCors(request, env, json({ error: \"Missing aid/bvid\" }, { status: 400 }))\n        const params: Record<string, string> = {}\n        if (aid) params.aid = aid\n        if (bvid) params.bvid = bvid\n        return cachedJson(request, env, url.toString(), 3600, () => forwardJsonWithWbi(request, env, URL_WBI_VIEW, params))\n      }\n\n      if (url.pathname === \"/api/bili/playurl\") {\n        const bvid = url.searchParams.get(\"bvid\") || \"\"\n        const cid = url.searchParams.get(\"cid\") || \"\"\n        const qn = url.searchParams.get(\"qn\") || \"\"\n        const mode = (url.searchParams.get(\"mode\") || \"dash\").toLowerCase()\n        if (!bvid || !cid) return withCors(request, env, json({ error: \"Missing bvid/cid\" }, { status: 400 }))\n        const params: Record<string, string> = {\n          bvid,\n          cid,\n          fnval: mode === \"html5\" ? \"0\" : \"272\",\n          fnver: \"0\",\n          fourk: \"0\",\n          otype: \"json\",\n          platform: mode === \"html5\" ? \"html5\" : \"pc\"\n        }\n        if (qn) params.qn = qn\n        return cachedJson(request, env, url.toString(), 30, () => forwardJsonWithWbi(request, env, URL_WBI_PLAYURL, params))\n      }\n\n      if (url.pathname === \"/api/bili/image\") {\n        return handleImage(request, env, url)\n      }\n\n      if (url.pathname === \"/api/bili/audio\") {\n        return handleAudio(request, env, url)\n      }\n\n      return routeNotFound(request, env)\n    } catch (e) {\n      const msg = e instanceof Error ? e.message : String(e)\n      return withCors(request, env, json({ error: \"Internal error\", message: msg }, { status: 500 }))\n    }\n  }\n}\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"D:\\\\_git\\\\soft-zihan.github.io\\\\bili-proxy-worker\\\\src\\\\index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"D:\\\\_git\\\\soft-zihan.github.io\\\\bili-proxy-worker\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"D:\\\\_git\\\\soft-zihan.github.io\\\\bili-proxy-worker\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"D:\\\\_git\\\\soft-zihan.github.io\\\\bili-proxy-worker\\\\src\\\\index.ts\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"D:\\\\_git\\\\soft-zihan.github.io\\\\bili-proxy-worker\\\\.wrangler\\\\tmp\\\\bundle-DewmVH\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"D:\\\\_git\\\\soft-zihan.github.io\\\\bili-proxy-worker\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"D:\\\\_git\\\\soft-zihan.github.io\\\\bili-proxy-worker\\\\.wrangler\\\\tmp\\\\bundle-DewmVH\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"D:\\\\_git\\\\soft-zihan.github.io\\\\bili-proxy-worker\\\\.wrangler\\\\tmp\\\\bundle-DewmVH\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": ["cache"]
}
